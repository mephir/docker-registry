services:
  registry-ui:
    container_name: registry-ui-mephir-io
    image: joxit/docker-registry-ui:main
    restart: always
    env_file:
      - path: "./ui/.env"
        required: true
      - path: "./ui/.env.override"
        required: false
    links:
      - "registry:registry"
    networks:
      - traefik
    depends_on:
      - registry

  registry:
    container_name: registry-mephir-io
    image: registry:2
    restart: always
    env_file:
      - path: "./registry/.env"
        required: true
      - path: "./registry/.env.override"
        required: false
    volumes:
      - registry:/data
      - ./auth:/auth
    networks:
      - traefik

volumes:
  registry:

networks:
  traefik:
    external: true
